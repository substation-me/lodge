{"version":3,"sources":["../../source/checkout/checkout-stripe.js"],"names":["vv","window","lodge","stripe","eventAttached","getYears","year","Date","getFullYear","years","i","generateToken","key","source","embedded","events","fire","params","loadScript","formElements","push","id","type","placeholder","options","value","text","userinput","getInput","add","e","detail","Stripe","setPublishableKey","card","createToken","name","number","cvc","exp_month","exp_year","status","response","error","document","getElementById","innerHTML","message","styles","addClass","getElementsByClassName","setTimeout","removeClass","storage","overlay","reveal","elements","style","msg","form","createElement","container","className","element","length","input","codes","Object","keys","sort","a","b","option","n","selected","appendChild","required","setAttribute","checkoutdata","total","transaction_message","preventDefault","stopPropagation","formdata","incomplete","getAttribute","checkout","prepped","countries","prep","injectCSS","path","begin","location","href","protocol","testing","recurring","shipping","shippingElements","paypal","selectedCountry","currency","r1","r2","initiatepayment","showerror","ppspan","stspan"],"mappings":"AAAC,WAAW,CACR,aACA,GAAIA,CAAAA,CAAE,CAAGC,MAAM,CAACC,KAAhB,CAWAF,CAAE,CAACG,MAAH,CAAY,CACRC,aAAa,GADL,CAGRC,QAAQ,CAAE,UAAW,CAGjB,OAFIC,CAAAA,CAAI,CAAI,GAAIC,CAAAA,IAAJ,GAAWC,WAAX,EAEZ,CADIC,CAAK,CAAG,EACZ,CAASC,CAAC,CAAG,CAAb,CAAoB,EAAJ,CAAAA,CAAhB,CAAwBA,CAAC,EAAzB,CACID,CAAK,CAACH,CAAD,CAAL,CAAcA,CADlB,CAEIA,CAAI,EAFR,CAIA,MAAOG,CAAAA,CACV,CAXO,CAaRE,aAAa,CAAE,SAASC,CAAT,CAAaC,CAAb,CAAqB,CAChC,GAAIb,CAAAA,CAAE,CAAGC,MAAM,CAACC,KAAhB,CACIF,CAAE,CAACc,QAFyB,CAG5Bd,CAAE,CAACe,MAAH,CAAUC,IAAV,CAAehB,CAAf,CAAkB,sBAAlB,CAAyCiB,MAAzC,CAH4B,CAK5BjB,CAAE,CAACkB,UAAH,CAAc,2BAAd,CAA2C,UAAW,CAClD,GAAIC,CAAAA,CAAY,CAAG,EAAnB,CACAA,CAAY,CAACC,IAAb,CAAkB,CAACC,EAAE,CAAE,MAAL,CAAaC,IAAI,CAAE,MAAnB,CAA2BC,WAAW,CAAE,iBAAxC,CAAlB,CAFkD,CAGlDJ,CAAY,CAACC,IAAb,CAAkB,CAACC,EAAE,CAAE,OAAL,CAAcC,IAAI,CAAE,OAApB,CAA6BC,WAAW,CAAE,eAA1C,CAAlB,CAHkD,CAIlDJ,CAAY,CAACC,IAAb,CAAkB,CAACC,EAAE,CAAE,aAAL,CAAoBC,IAAI,CAAE,MAA1B,CAAkCC,WAAW,CAAE,oBAA/C,CAAlB,CAJkD,CAKlDJ,CAAY,CAACC,IAAb,CAAkB,CAACC,EAAE,CAAE,mBAAL,CAA0BC,IAAI,CAAE,QAAhC,CAA0CE,OAAO,CAAE,CACjE,KAAK,SAD4D,CAEjE,KAAK,SAF4D,CAGjE,KAAK,SAH4D,CAIjE,KAAK,SAJ4D,CAKjE,KAAK,SAL4D,CAMjE,KAAK,SAN4D,CAOjE,KAAK,SAP4D,CAQjE,KAAK,SAR4D,CASjE,KAAK,SAT4D,CAUjE,GAAK,SAV4D,CAWjE,GAAK,SAX4D,CAYjE,GAAK,SAZ4D,CAAnD,CAafC,KAAK,CAAC,IAbS,CAAlB,CALkD,CAmBlDN,CAAY,CAACC,IAAb,CAAkB,CAACC,EAAE,CAAE,kBAAL,CAAyBC,IAAI,CAAE,QAA/B,CAAyCE,OAAO,CAAExB,CAAE,CAACG,MAAH,CAAUE,QAAV,EAAlD,CAAwEkB,WAAW,CAAE,GAAIhB,CAAAA,IAAJ,GAAWC,WAAX,EAArF,CAAlB,CAnBkD,CAoBlDW,CAAY,CAACC,IAAb,CAAkB,CAACC,EAAE,CAAE,UAAL,CAAiBC,IAAI,CAAE,MAAvB,CAA+BC,WAAW,CAAE,KAA5C,CAAlB,CApBkD,CAqBlDJ,CAAY,CAACC,IAAb,CAAkB,CAACC,EAAE,CAAE,eAAL,CAAsBC,IAAI,CAAE,QAA5B,CAAsCI,IAAI,CAAE,gBAA5C,CAAlB,CArBkD,CAsBlD1B,CAAE,CAAC2B,SAAH,CAAaC,QAAb,CAAsBT,CAAtB,CAAmC,gBAAnC,CAAqD,IAArD,CAA2D,EAA3D,CAtBkD,CAuB7CnB,CAAE,CAACG,MAAH,CAAUC,aAvBmC,GAwB9CJ,CAAE,CAACe,MAAH,CAAUc,GAAV,CAAc7B,CAAd,CAAiB,WAAjB,CAA8B,SAAS8B,CAAT,CAAY,CACG,gBAArC,EAAAA,CAAC,CAACC,MAAF,CAAS,uBAAT,CADkC,GAElCC,MAAM,CAACC,iBAAP,CAAyBrB,CAAzB,CAFkC,CAGlCoB,MAAM,CAACE,IAAP,CAAYC,WAAZ,CAAwB,CACpBC,IAAI,CAAEN,CAAC,CAACC,MAAF,KADc,CAEpBM,MAAM,CAAEP,CAAC,CAACC,MAAF,CAAS,aAAT,CAFY,CAGpBO,GAAG,CAAER,CAAC,CAACC,MAAF,CAAS,UAAT,CAHe,CAIpBQ,SAAS,CAAET,CAAC,CAACC,MAAF,CAAS,mBAAT,CAJS,CAKpBS,QAAQ,CAAEV,CAAC,CAACC,MAAF,CAAS,kBAAT,CALU,CAAxB,CAMG,SAASU,CAAT,CAAiBC,CAAjB,CAAgC,CAC3BA,CAAQ,CAACC,KADkB,EAG3BC,QAAQ,CAACC,cAAT,CAAwB,0BAAxB,EAAoDC,SAApD,CAAgEJ,CAAQ,CAACC,KAAT,CAAeI,OAHpD,CAI3B/C,CAAE,CAACgD,MAAH,CAAUC,QAAV,CAAmBL,QAAQ,CAACM,sBAAT,CAAgC,4BAAhC,EAA8D,CAA9D,CAAnB,CAAoF,MAApF,CAJ2B,CAK3BC,UAAU,CAAC,UAAU,CACjBnD,CAAE,CAACgD,MAAH,CAAUI,WAAV,CAAsBR,QAAQ,CAACM,sBAAT,CAAgC,4BAAhC,EAA8D,CAA9D,CAAtB,CAAuF,MAAvF,CACH,CAFS,CAEP,GAFO,CALiB,GAU3BlD,CAAE,CAACqD,OAAH,qBAAuCX,CAAQ,CAACrB,EAVrB,CAW3BrB,CAAE,CAACqD,OAAH,mBAAuCvB,CAAC,CAACC,MAAF,KAXZ,CAY3B/B,CAAE,CAACqD,OAAH,oBAAuCvB,CAAC,CAACC,MAAF,MAZZ,CAa3B/B,CAAE,CAACe,MAAH,CAAUC,IAAV,CAAehB,CAAf,CAAkB,cAAlB,CAAiCA,CAAE,CAACqD,OAAH,aAAjC,CAA4DxC,CAA5D,CAb2B,CAc3Bb,CAAE,CAACsD,OAAH,CAAWC,MAAX,CAAkB,sCAAlB,CAd2B,CAgBlC,CAtBD,CAHkC,CA4BzC,CA5BD,CAxB8C,CAqD9CvD,CAAE,CAACG,MAAH,CAAUC,aAAV,GArD8C,CAuDrD,CAvDD,CAyDP,CA3EO,CAbJ,CAiHRJ,CAAE,CAAC2B,SAAH,CAAe,CACXC,QAAQ,CAAE,SAAU4B,CAAV,CAAmBlC,CAAnB,CAAwBmC,CAAxB,CAA8BC,CAA9B,CAAmC,CACzCpC,CAAI,CAAGA,CAAI,EAAI,SAD0B,IAErCqC,CAAAA,CAAI,CAAGf,QAAQ,CAACgB,aAAT,CAAuB,MAAvB,CAF8B,CAGrCC,CAAS,CAAGjB,QAAQ,CAACgB,aAAT,CAAuB,KAAvB,CAHyB,CAIzCC,CAAS,CAACC,SAAV,CAAsB,4BAJmB,CAKzC,GAAIf,CAAAA,CAAO,CAAGH,QAAQ,CAACgB,aAAT,CAAuB,KAAvB,CAAd,CACAb,CAAO,CAAC1B,EAAR,CAAa,0BAN4B,CAOzC0B,CAAO,CAACD,SAAR,CAAoB,QAPqB,CASrCY,CATqC,GAUrCX,CAAO,CAACD,SAAR,CAAoBY,CAViB,EAYzCC,CAAI,CAACG,SAAL,CAAiB,oBAAsBxC,CAAtB,CAA6B,GAA7B,CAAmCmC,CAZX,CAczCD,CAAQ,CAACpC,IAAT,CAAc,CAACC,EAAE,CAAC,uBAAJ,CAA6BC,IAAI,CAAC,QAAlC,CAA4CG,KAAK,CAACH,CAAlD,CAAd,CAdyC,CAgBzC,IAAK,GACGyC,CAAAA,CADH,CAAIrD,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG8C,CAAQ,CAACQ,MAA7B,CAAqCtD,CAAC,EAAtC,CAA0C,CAEtC,GADIqD,CACJ,CADcP,CAAQ,CAAC9C,CAAD,CACtB,CAAqB,QAAjB,GAAAqD,CAAO,CAACzC,IAAR,EAA8C,QAAjB,GAAAyC,CAAO,CAACzC,IAAzC,CAA4D,CACxD,GAAI2C,CAAAA,CAAK,CAAGrB,QAAQ,CAACgB,aAAT,CAAuB,OAAvB,CAAZ,CACAK,CAAK,CAAC3C,IAAN,CAAayC,CAAO,CAACzC,IAFmC,CAGxD2C,CAAK,CAAC1C,WAAN,CAAoBwC,CAAO,CAACxC,WAH4B,CAIpDwC,CAAO,CAACtC,KAJ4C,GAKpDwC,CAAK,CAACxC,KAAN,CAAcsC,CAAO,CAACtC,KAL8B,CAO3D,CAPD,IAQI,IAAoB,QAAhB,EAAAsC,CAAO,CAACzC,IAAZ,CAA8B,IACtB2C,CAAAA,CAAK,CAAGrB,QAAQ,CAACgB,aAAT,CAAuB,QAAvB,CADc,CAEtBM,CAAK,CAAGC,MAAM,CAACC,IAAP,CAAYL,CAAO,CAACvC,OAApB,CAFc,CAG1B0C,CAAK,CAACG,IAAN,CAAW,SAASC,CAAT,CAAYC,CAAZ,CAAe,CACtB,MAAOD,CAAAA,CAAC,CAAGC,CACd,CAFD,CAH0B,CAM1B,IAAK,GACGC,CAAAA,CADH,CAAIC,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGP,CAAK,CAACF,MAA1B,CAAkCS,CAAC,EAAnC,CACQD,CADR,CACiB5B,QAAQ,CAACgB,aAAT,CAAuB,QAAvB,CADjB,CAEIY,CAAM,CAAC/C,KAAP,CAAeyC,CAAK,CAACO,CAAD,CAFxB,CAGID,CAAM,CAAC9C,IAAP,CAAcqC,CAAO,CAACvC,OAAR,CAAgB0C,CAAK,CAACO,CAAD,CAArB,CAHlB,CAIQV,CAAO,CAACtC,KAAR,EAAiByC,CAAK,CAACO,CAAD,CAJ9B,GAKQD,CAAM,CAACE,QAAP,CAAkB,UAL1B,EAOIT,CAAK,CAACU,WAAN,CAAkBH,CAAlB,CAEP,CAfD,IAeO,CACH,GAAIP,CAAAA,CAAK,CAAGrB,QAAQ,CAACgB,aAAT,CAAuB,QAAvB,CAAZ,CACAK,CAAK,CAAC3C,IAAN,CAAa,QAFV,CAGH2C,CAAK,CAACnB,SAAN,CAAkBiB,CAAO,CAACrC,IAC7B,CAQL,GANAuC,CAAK,CAAC7B,IAAN,CAAa2B,CAAO,CAAC1C,EAMrB,CALA4C,CAAK,CAAC5C,EAAN,CAAW,oBAAsBC,CAAtB,CAA6B,GAA7B,CAAmCyC,CAAO,CAAC1C,EAKtD,CAJI0C,CAAO,CAACa,QAIZ,EAHIX,CAAK,CAACY,YAAN,CAAmB,eAAnB,CAAmC,GAAnC,CAGJ,CAAkB,eAAd,EAAAd,CAAO,CAAC1C,EAAR,EAAiCrB,CAAE,CAACqD,OAAH,CAAWyB,YAAX,CAAwBC,KAA7D,CAAoE,CAGhE,GAAIA,CAAAA,CAAK,CAAGnC,QAAQ,CAACgB,aAAT,CAAuB,KAAvB,CAAZ,CACAmB,CAAK,CAAC1D,EAAN,CAAW,uBAJqD,CAM3DrB,CAAE,CAACqD,OAAH,CAAWyB,YAAX,CAAwBE,mBANmC,GAO5DhF,CAAE,CAACqD,OAAH,CAAWyB,YAAX,CAAwBE,mBAAxB,CAA8C,EAPc,EAWhED,CAAK,CAACjC,SAAN,CAAkB,0DAAwD9C,CAAE,CAACqD,OAAH,CAAWyB,YAAX,CAAwBC,KAAhF,CAAsF/E,CAAE,CAACqD,OAAH,CAAWyB,YAAX,CAAwBE,mBAA9G,CAAkI,mCAXpF,CAahErB,CAAI,CAACgB,WAAL,CAAiBI,CAAjB,CACH,CAEDpB,CAAI,CAACgB,WAAL,CAAiBV,CAAjB,CACH,CAEDJ,CAAS,CAACc,WAAV,CAAsB5B,CAAtB,CAxEyC,CAyEzCc,CAAS,CAACc,WAAV,CAAsBhB,CAAtB,CAzEyC,CA2EzC3D,CAAE,CAACe,MAAH,CAAUc,GAAV,CAAc8B,CAAd,CAAmB,QAAnB,CAA6B,SAAS7B,CAAT,CAAY,CACrCA,CAAC,CAACmD,cAAF,EADqC,CAErCnD,CAAC,CAACoD,eAAF,EAFqC,CAKrC,OACQpD,CAAAA,CADR,CAFIqD,CAAQ,CAAG,EAEf,CADIC,CAAU,GACd,CAAU1E,CAAC,CAAG,CAAd,CAAiBA,CAAC,CAAGiD,CAAI,CAACH,QAAL,CAAcQ,MAAnC,CAA2CtD,CAAC,EAA5C,CACQoB,CADR,CACY6B,CAAI,CAACH,QAAL,CAAc9C,CAAd,CADZ,CAEIyE,CAAQ,CAACrD,CAAC,CAACM,IAAH,CAAR,CAAmBN,CAAC,CAACL,KAFzB,CAGQK,CAAC,CAACuD,YAAF,CAAe,eAAf,GAA8C,EAAX,EAAAvD,CAAC,CAACL,KAH7C,EAIQ2D,CAAU,GAJlB,CAKQpF,CAAE,CAACgD,MAAH,CAAUC,QAAV,CAAmBnB,CAAnB,CAAqB,YAArB,CALR,EAOQ9B,CAAE,CAACgD,MAAH,CAAUI,WAAV,CAAsBtB,CAAtB,CAAwB,YAAxB,CAPR,CAUIsD,CAfiC,EAiBjCxC,QAAQ,CAACC,cAAT,CAAwB,0BAAxB,EAAoDC,SAApD,CAAgE,sCAjB/B,CAkBjC9C,CAAE,CAACgD,MAAH,CAAUC,QAAV,CAAmBL,QAAQ,CAACM,sBAAT,CAAgC,4BAAhC,EAA8D,CAA9D,CAAnB,CAAoF,MAApF,CAlBiC,CAmBjCC,UAAU,CAAC,UAAU,CACjBnD,CAAE,CAACgD,MAAH,CAAUI,WAAV,CAAsBR,QAAQ,CAACM,sBAAT,CAAgC,4BAAhC,EAA8D,CAA9D,CAAtB,CAAuF,MAAvF,CACH,CAFS,CAEP,GAFO,CAnBuB,EAuBjClD,CAAE,CAACe,MAAH,CAAUC,IAAV,CAAehB,CAAf,CAAkB,WAAlB,CAA8BmF,CAA9B,CAEP,CAzBD,CA3EyC,CAsGzCnF,CAAE,CAACsD,OAAH,CAAWC,MAAX,CAAkBM,CAAlB,CACH,CAxGU,CAjHP,CAiPR7D,CAAE,CAACsF,QAAH,CAAc,CACVC,OAAO,GADG,CAGVC,SAAS,CAAE,CACP,GAAK,aADE,CAEP,GAAK,kBAFE,CAGP,GAAK,SAHE,CAIP,GAAK,SAJE,CAKP,GAAK,gBALE,CAMP,GAAK,SANE,CAOP,GAAK,QAPE,CAQP,GAAK,UARE,CASP,GAAK,YATE,CAUP,GAAK,qBAVE,CAWP,GAAK,WAXE,CAYP,GAAK,SAZE,CAaP,GAAK,OAbE,CAcP,GAAK,WAdE,CAeP,GAAK,SAfE,CAgBP,GAAK,YAhBE,CAiBP,GAAK,SAjBE,CAkBP,GAAK,SAlBE,CAmBP,GAAK,YAnBE,CAoBP,GAAK,UApBE,CAqBP,GAAK,SArBE,CAsBP,GAAK,SAtBE,CAuBP,GAAK,QAvBE,CAwBP,GAAK,OAxBE,CAyBP,GAAK,SAzBE,CA0BP,GAAK,QA1BE,CA2BP,GAAK,SA3BE,CA4BP,GAAK,mCA5BE,CA6BP,GAAK,oBA7BE,CA8BP,GAAK,UA9BE,CA+BP,GAAK,eA/BE,CAgCP,GAAK,QAhCE,CAiCP,GAAK,gCAjCE,CAkCP,GAAK,mBAlCE,CAmCP,GAAK,UAnCE,CAoCP,GAAK,cApCE,CAqCP,GAAK,SArCE,CAsCP,GAAK,UAtCE,CAuCP,GAAK,UAvCE,CAwCP,GAAK,QAxCE,CAyCP,GAAK,YAzCE,CA0CP,GAAK,gBA1CE,CA2CP,GAAK,0BA3CE,CA4CP,GAAK,MA5CE,CA6CP,GAAK,OA7CE,CA8CP,GAAK,OA9CE,CA+CP,GAAK,kBA/CE,CAgDP,GAAK,yBAhDE,CAiDP,GAAK,UAjDE,CAkDP,GAAK,SAlDE,CAmDP,GAAK,OAnDE,CAoDP,GAAK,uCApDE,CAqDP,GAAK,cArDE,CAsDP,GAAK,YAtDE,CAuDP,GAAK,uBAvDE,CAwDP,GAAK,SAxDE,CAyDP,GAAK,MAzDE,CA0DP,GAAK,SA1DE,CA2DP,GAAK,QA3DE,CA4DP,GAAK,gBA5DE,CA6DP,GAAK,SA7DE,CA8DP,GAAK,UA9DE,CA+DP,GAAK,UA/DE,CAgEP,GAAK,oBAhEE,CAiEP,GAAK,SAjEE,CAkEP,GAAK,OAlEE,CAmEP,GAAK,aAnEE,CAoEP,GAAK,mBApEE,CAqEP,GAAK,SArEE,CAsEP,GAAK,SAtEE,CAuEP,GAAK,UAvEE,CAwEP,GAAK,kBAxEE,CAyEP,GAAK,eAzEE,CA0EP,GAAK,MA1EE,CA2EP,GAAK,SA3EE,CA4EP,GAAK,QA5EE,CA6EP,GAAK,eA7EE,CA8EP,GAAK,kBA9EE,CA+EP,GAAK,6BA/EE,CAgFP,GAAK,OAhFE,CAiFP,GAAK,QAjFE,CAkFP,GAAK,SAlFE,CAmFP,GAAK,SAnFE,CAoFP,GAAK,OApFE,CAqFP,GAAK,WArFE,CAsFP,GAAK,QAtFE,CAuFP,GAAK,WAvFE,CAwFP,GAAK,SAxFE,CAyFP,GAAK,YAzFE,CA0FP,GAAK,MA1FE,CA2FP,GAAK,WA3FE,CA4FP,GAAK,UA5FE,CA6FP,GAAK,QA7FE,CA8FP,GAAK,eA9FE,CA+FP,GAAK,QA/FE,CAgGP,GAAK,OAhGE,CAiGP,GAAK,mCAjGE,CAkGP,GAAK,+BAlGE,CAmGP,GAAK,UAnGE,CAoGP,GAAK,WApGE,CAqGP,GAAK,SArGE,CAsGP,GAAK,SAtGE,CAuGP,GAAK,OAvGE,CAwGP,GAAK,WAxGE,CAyGP,GAAK,2BAzGE,CA0GP,GAAK,MA1GE,CA2GP,GAAK,SA3GE,CA4GP,GAAK,aA5GE,CA6GP,GAAK,QA7GE,CA8GP,GAAK,OA9GE,CA+GP,GAAK,SA/GE,CAgHP,GAAK,OAhHE,CAiHP,GAAK,QAjHE,CAkHP,GAAK,QAlHE,CAmHP,GAAK,YAnHE,CAoHP,GAAK,OApHE,CAqHP,GAAK,UArHE,CAsHP,GAAK,aAtHE,CAuHP,GAAK,OAvHE,CAwHP,GAAK,QAxHE,CAyHP,GAAK,YAzHE,CA0HP,GAAK,uCA1HE,CA2HP,GAAK,QA3HE,CA4HP,GAAK,SA5HE,CA6HP,GAAK,SA7HE,CA8HP,GAAK,SA9HE,CA+HP,GAAK,wBA/HE,CAgIP,GAAK,eAhIE,CAiIP,GAAK,WAjIE,CAkIP,GAAK,YAlIE,CAmIP,GAAK,OAnIE,CAoIP,GAAK,4CApIE,CAqIP,GAAK,YArIE,CAsIP,GAAK,QAtIE,CAuIP,GAAK,UAvIE,CAwIP,GAAK,UAxIE,CAyIP,GAAK,MAzIE,CA0IP,GAAK,OA1IE,CA2IP,GAAK,kBA3IE,CA4IP,GAAK,YA5IE,CA6IP,GAAK,YA7IE,CA8IP,GAAK,WA9IE,CA+IP,GAAK,SA/IE,CAgJP,GAAK,QAhJE,CAiJP,GAAK,iCAjJE,CAkJP,GAAK,sBAlJE,CAmJP,GAAK,QAnJE,CAoJP,GAAK,UApJE,CAqJP,GAAK,YArJE,CAsJP,GAAK,YAtJE,CAuJP,GAAK,SAvJE,CAwJP,GAAK,YAxJE,CAyJP,GAAK,SAzJE,CA0JP,GAAK,SA1JE,CA2JP,GAAK,OA3JE,CA4JP,GAAK,OA5JE,CA6JP,GAAK,aA7JE,CA8JP,GAAK,eA9JE,CA+JP,GAAK,aA/JE,CAgKP,GAAK,WAhKE,CAiKP,GAAK,OAjKE,CAkKP,GAAK,SAlKE,CAmKP,GAAK,MAnKE,CAoKP,GAAK,gBApKE,CAqKP,GAAK,0BArKE,CAsKP,GAAK,QAtKE,CAuKP,GAAK,MAvKE,CAwKP,GAAK,UAxKE,CAyKP,GAAK,OAzKE,CA0KP,GAAK,iCA1KE,CA2KP,GAAK,QA3KE,CA4KP,GAAK,kBA5KE,CA6KP,GAAK,UA7KE,CA8KP,GAAK,MA9KE,CA+KP,GAAK,aA/KE,CAgLP,GAAK,UAhLE,CAiLP,GAAK,QAjLE,CAkLP,GAAK,UAlLE,CAmLP,GAAK,aAnLE,CAoLP,GAAK,OApLE,CAqLP,GAAK,YArLE,CAsLP,GAAK,SAtLE,CAuLP,GAAK,oBAvLE,CAwLP,GAAK,QAxLE,CAyLP,GAAK,qBAzLE,CA0LP,GAAK,8CA1LE,CA2LP,GAAK,uBA3LE,CA4LP,GAAK,aA5LE,CA6LP,GAAK,4BA7LE,CA8LP,GAAK,2BA9LE,CA+LP,GAAK,kCA/LE,CAgMP,GAAK,OAhME,CAiMP,GAAK,YAjME,CAkMP,GAAK,uBAlME,CAmMP,GAAK,cAnME,CAoMP,GAAK,SApME,CAqMP,GAAK,QArME,CAsMP,GAAK,YAtME,CAuMP,GAAK,cAvME,CAwMP,GAAK,WAxME,CAyMP,GAAK,2BAzME,CA0MP,GAAK,UA1ME,CA2MP,GAAK,UA3ME,CA4MP,GAAK,iBA5ME,CA6MP,GAAK,SA7ME,CA8MP,GAAK,cA9ME,CA+MP,GAAK,8CA/ME,CAgNP,GAAK,OAhNE,CAiNP,GAAK,WAjNE,CAkNP,GAAK,OAlNE,CAmNP,GAAK,UAnNE,CAoNP,GAAK,wBApNE,CAqNP,GAAK,WArNE,CAsNP,GAAK,QAtNE,CAuNP,GAAK,aAvNE,CAwNP,GAAK,sBAxNE,CAyNP,GAAK,2BAzNE,CA0NP,GAAK,YA1NE,CA2NP,GAAK,8BA3NE,CA4NP,GAAK,UA5NE,CA6NP,GAAK,aA7NE,CA8NP,GAAK,MA9NE,CA+NP,GAAK,SA/NE,CAgOP,GAAK,OAhOE,CAiOP,GAAK,qBAjOE,CAkOP,GAAK,SAlOE,CAmOP,GAAK,QAnOE,CAoOP,GAAK,cApOE,CAqOP,GAAK,0BArOE,CAsOP,GAAK,QAtOE,CAuOP,GAAK,QAvOE,CAwOP,GAAK,SAxOE,CAyOP,GAAK,sBAzOE,CA0OP,GAAK,gBA1OE,CA2OP,GAAK,eA3OE,CA4OP,GAAK,SA5OE,CA6OP,GAAK,YA7OE,CA8OP,GAAK,SA9OE,CA+OP,GAAK,mCA/OE,CAgPP,GAAK,UAhPE,CAiPP,GAAK,yBAjPE,CAkPP,GAAK,sBAlPE,CAmPP,GAAK,mBAnPE,CAoPP,GAAK,gBApPE,CAqPP,GAAK,OArPE,CAsPP,GAAK,QAtPE,CAuPP,GAAK,UAvPE,CAHD,CA6PVC,IAAI,CAAE,UAAY,CACTzF,CAAE,CAACsF,QAAH,CAAYC,OADH,GAGVvF,CAAE,CAACgD,MAAH,CAAU0C,SAAV,CAAoB1F,CAAE,CAAC2F,IAAH,CAAU,yBAA9B,OAHU,CAIV3F,CAAE,CAACsF,QAAH,CAAYC,OAAZ,GAJU,CAMjB,CAnQS,CAqQVK,KAAK,CAAE,SAAUpE,CAAV,CAAkBX,CAAlB,CAA0B,CAC7B,GAAIb,CAAE,CAACc,QAAP,CACId,CAAE,CAACe,MAAH,CAAUC,IAAV,CAAehB,CAAf,CAAkB,eAAlB,CAAkCwB,CAAlC,CADJ,KAoCI,IAjCAxB,CAAE,CAACsF,QAAH,CAAYG,IAAZ,EAiCA,CA/BAzF,CAAE,CAACqD,OAAH,cAA6B,CACzB,SADyB,CAEzB,SAFyB,CAGzB,WAHyB,CAIzB,WAJyB,CAKzB,OALyB,CAMzB,QANyB,CAOzB,YAPyB,CAQzB,OAAYpD,MAAM,CAAC4F,QAAP,CAAgBC,IARH,CASzB,QATyB,CAUzB,sBAVyB,CA+B7B,CAlB0B,QAAtB,GAAAD,QAAQ,CAACE,QAAT,EAAkC,KAAAvE,CAAO,CAACwE,OAkB9C,GAjBIxE,CAAO,CAACrB,MAAR,GAiBJ,EAbIqB,CAAO,CAACyE,SAaZ,GAZIjG,CAAE,CAACqD,OAAH,cAA2B4C,SAA3B,GAYJ,EATIzE,CAAO,CAACwD,mBASZ,GARIhF,CAAE,CAACqD,OAAH,cAA2B2B,mBAA3B,CAAiDxD,CAAO,CAACwD,mBAQ7D,EALIxD,CAAO,CAACuD,KAKZ,GAJI/E,CAAE,CAACqD,OAAH,cAA2B0B,KAA3B,CAAmCvD,CAAO,CAACuD,KAI/C,EAAIvD,CAAO,CAAC0E,QAAZ,CAAsB,CAGlB,GAAIC,CAAAA,CAAgB,CAAG,CAEnB,CAAC9E,EAAE,CAAE,MAAL,CAAaC,IAAI,CAAE,MAAnB,CAA2BC,WAAW,CAAE,cAAxC,CAAwDqD,QAAQ,GAAhE,CAFmB,CAGnB,CAACvD,EAAE,CAAE,UAAL,CAAiBC,IAAI,CAAE,MAAvB,CAA+BC,WAAW,CAAE,oBAA5C,CAAkEqD,QAAQ,GAA1E,CAHmB,CAInB,CAACvD,EAAE,CAAE,UAAL,CAAiBC,IAAI,CAAE,MAAvB,CAA+BC,WAAW,CAAE,oBAA5C,CAJmB,CAKnB,CAACF,EAAE,CAAE,MAAL,CAAaC,IAAI,CAAE,MAAnB,CAA2BC,WAAW,CAAE,MAAxC,CAAgDqD,QAAQ,GAAxD,CALmB,CAMnB,CAACvD,EAAE,CAAE,OAAL,CAAcC,IAAI,CAAE,MAApB,CAA4BC,WAAW,CAAE,uBAAzC,CAAkEqD,QAAQ,GAA1E,CANmB,CAOnB,CAACvD,EAAE,CAAE,YAAL,CAAmBC,IAAI,CAAE,MAAzB,CAAiCC,WAAW,CAAE,aAA9C,CAA6DqD,QAAQ,GAArE,CAPmB,CAAvB,CASA,GAAIpD,CAAO,CAACrB,MAAR,EAAkBqB,CAAO,CAAC4E,MAA9B,CAAsC,CAClC,GAAIC,CAAAA,CAAe,CAAG,IAAtB,CACA,GAAI7E,CAAO,CAAC8E,QAAZ,CACI,OAAQ9E,CAAO,CAAC8E,QAAhB,EACI,IAAK,KAAL,CACID,CAAe,CAAG,IADtB,CAEI,MACJ,IAAK,KAAL,CACIA,CAAe,CAAG,IADtB,CAEI,MACJ,IAAK,KAAL,CACIA,CAAe,CAAG,IADtB,CAEI,MACJ,IAAK,KAAL,CACIA,CAAe,CAAG,IADtB,CAEI,MACJ,IAAK,KAAL,CACIA,CAAe,CAAG,IADtB,CAEI,MACJ,IAAK,KAAL,CACIA,CAAe,CAAG,IADtB,CAEI,MACJ,IAAK,KAAL,CACIA,CAAe,CAAG,IADtB,CAEI,MACJ,IAAK,KAAL,CACIA,CAAe,CAAG,IADtB,CAtBJ,CA4BJF,CAAgB,CAAC/E,IAAjB,CAAsB,CAACC,EAAE,CAAE,SAAL,CAAgBC,IAAI,CAAE,QAAtB,CAAgCE,OAAO,CAAExB,CAAE,CAACsF,QAAH,CAAYE,SAArD,CAAgE/D,KAAK,CAAE4E,CAAvE,CAAtB,CA/BkC,CAiC7B7E,CAAO,CAACyE,SAjCqB,EAkCE,QAA5B,QAAOzE,CAAAA,CAAO,CAAC0E,QAlCW,EAmC1BC,CAAgB,CAAC/E,IAAjB,CAAsB,CAACC,EAAE,CAAE,iBAAL,CAAwBC,IAAI,CAAE,QAA9B,CAAwCE,OAAO,CAAE,CACnE,GAAG,wBADgE,CAEnE,GAAKA,CAAO,CAAC0E,QAAR,CAAiBK,EAF6C,CAGnE,GAAK/E,CAAO,CAAC0E,QAAR,CAAiBM,EAH6C,CAAjD,CAInB5B,QAAQ,GAJW,CAAtB,CAnC0B,CA4ClCuB,CAAgB,CAAC/E,IAAjB,CAAsB,CAACC,EAAE,CAAE,iBAAL,CAAwBC,IAAI,CAAE,QAA9B,CAAwCI,IAAI,CAAE,mBAA9C,CAAtB,CA5CkC,CA8CF,QAA5B,QAAOF,CAAAA,CAAO,CAAC0E,QA9Ce,CA+C9BlG,CAAE,CAAC2B,SAAH,CAAaC,QAAb,CAAsBuE,CAAtB,CAAuC,oBAAvC,CAA4D,UAA5D,CA/C8B,CAiD9BnG,CAAE,CAAC2B,SAAH,CAAaC,QAAb,CAAsBuE,CAAtB,CAAuC,oBAAvC,CAA4D,YAA5D,CAjD8B,CAoDlCnG,CAAE,CAACe,MAAH,CAAUc,GAAV,CAAc7B,CAAd,CAAiB,WAAjB,CAA8B,SAAS8B,CAAT,CAAY,CACG,oBAArC,EAAAA,CAAC,CAACC,MAAF,CAAS,uBAAT,CADkC,GAElC/B,CAAE,CAACqD,OAAH,uBAAyCvB,CAAC,CAACC,MAFT,CAGlC/B,CAAE,CAACsF,QAAH,CAAYmB,eAAZ,CAA4BjF,CAA5B,CAAoCX,CAApC,CAHkC,CAKzC,CALD,CAMH,CA1DD,IA2DIb,CAAAA,CAAE,CAACsF,QAAH,CAAYoB,SAAZ,EAEP,CAzED,IA0EI1G,CAAAA,CAAE,CAACsF,QAAH,CAAYmB,eAAZ,CAA4BjF,CAA5B,CAAoCX,CAApC,CAGX,CAvXS,CAyXV4F,eAAe,CAAE,SAAUjF,CAAV,CAAkBX,CAAlB,CAA0B,CAIvC,GAAIW,CAAO,CAACrB,MAAR,EAAkB,CAACqB,CAAO,CAAC4E,MAA/B,CACIpG,CAAE,CAACG,MAAH,CAAUQ,aAAV,CAAwBa,CAAO,CAACrB,MAAhC,CAAuCU,CAAvC,CADJ,KAIK,IAAI,CAACW,CAAO,CAACrB,MAAT,EAAmBqB,CAAO,CAAC4E,MAA/B,CACDpG,CAAE,CAACqD,OAAH,uBADC,CAEDrD,CAAE,CAACe,MAAH,CAAUC,IAAV,CAAehB,CAAf,CAAkB,cAAlB,CAAiCA,CAAE,CAACqD,OAAH,aAAjC,CAA4DxC,CAA5D,CAFC,CAGDb,CAAE,CAACsD,OAAH,CAAWC,MAAX,CAAkB,sCAAlB,CAHC,KAMA,IAAI/B,CAAO,CAACrB,MAAR,EAAkBqB,CAAO,CAAC4E,MAA9B,CAAsC,CAEvC,GAAIvC,CAAAA,CAAS,CAAGjB,QAAQ,CAACgB,aAAT,CAAuB,KAAvB,CAAhB,CACAC,CAAS,CAACC,SAAV,CAAsB,wBAHiB,IAKnC6C,CAAAA,CAAM,CAAG/D,QAAQ,CAACgB,aAAT,CAAuB,MAAvB,CAL0B,CAMnCgD,CAAM,CAAGhE,QAAQ,CAACgB,aAAT,CAAuB,MAAvB,CAN0B,CAQvC+C,CAAM,CAAC7D,SAAP,CAAmB,iBARoB,CASvC6D,CAAM,CAAC7C,SAAP,CAAmB,QAToB,CAUvC8C,CAAM,CAAC9D,SAAP,CAAmB,wBAVoB,CAWvC8D,CAAM,CAAC9C,SAAP,CAAmB,QAXoB,CAcvC9D,CAAE,CAACe,MAAH,CAAUc,GAAV,CAAc8E,CAAd,CAAqB,OAArB,CAA8B,SAAS7E,CAAT,CAAY,CACtCA,CAAC,CAACmD,cAAF,EADsC,CAEtCnD,CAAC,CAACoD,eAAF,EAFsC,CAGtClF,CAAE,CAACqD,OAAH,uBAHsC,CAItCrD,CAAE,CAACe,MAAH,CAAUC,IAAV,CAAehB,CAAf,CAAkB,cAAlB,CAAiCA,CAAE,CAACqD,OAAH,aAAjC,CAA4DxC,CAA5D,CAJsC,CAKtCb,CAAE,CAACsD,OAAH,CAAWC,MAAX,CAAkB,sCAAlB,CACH,CAND,CAduC,CAuBvCvD,CAAE,CAACe,MAAH,CAAUc,GAAV,CAAc+E,CAAd,CAAqB,OAArB,CAA8B,SAAS9E,CAAT,CAAY,CACtCA,CAAC,CAACmD,cAAF,EADsC,CAEtCnD,CAAC,CAACoD,eAAF,EAFsC,CAGtClF,CAAE,CAACG,MAAH,CAAUQ,aAAV,CAAwBa,CAAO,CAACrB,MAAhC,CAAuCU,CAAvC,CACH,CAJD,CAvBuC,CA6BvCgD,CAAS,CAACc,WAAV,CAAsBgC,CAAtB,CA7BuC,CA8BvC9C,CAAS,CAACc,WAAV,CAAsBiC,CAAtB,CA9BuC,CAgCvC5G,CAAE,CAACsD,OAAH,CAAWC,MAAX,CAAkBM,CAAlB,CAEH,CAlCI,IAqCD7D,CAAAA,CAAE,CAACsF,QAAH,CAAYoB,SAAZ,EAEP,CA9aS,CAgbVA,SAAS,CAAE,UAAgB,CACvB1G,CAAE,CAACsD,OAAH,CAAWC,MAAX,CAAkB,0LAAlB,CACH,CAlbS,CAqbjB,CAtqBA,G","sourcesContent":["(function() {\n    'use strict';\n    var vv = window.lodge;\n\n    /***************************************************************************************\n     *\n     * window.lodge.stripe (object)\n     * Handle Stripe.com payment token generation\n     *\n     * PUBLIC-ISH FUNCTIONS\n     * window.lodge.stripe.generateToken(string key, target source)\n     *\n     ***************************************************************************************/\n    vv.stripe = {\n        eventAttached: false,\n\n        getYears: function() {\n            var year =  new Date().getFullYear();\n            var years = {};\n            for (var i = 0; i < 20; i++) {\n                years[year] = year;\n                year++;\n            }\n            return years;\n        },\n\n        generateToken: function(key,source) {\n            var vv = window.lodge;\n            if (vv.embedded) {\n                vv.events.fire(vv,'stripetokenrequested',params);\n            } else {\n                vv.loadScript('https://js.stripe.com/v2/', function() {\n                    var formElements = [];\n                    formElements.push({id: \"name\", type: \"text\", placeholder: \"Cardholder name\"});\n                    formElements.push({id: \"email\", type: \"email\", placeholder: \"Email address\"});\n                    formElements.push({id: \"card-number\", type: \"text\", placeholder: \"Credit card number\"});\n                    formElements.push({id: \"card-expiry-month\", type: \"select\", options: {\n                        \"01\":\"01: Jan\",\n                        \"02\":\"02: Feb\",\n                        \"03\":\"03: Mar\",\n                        \"04\":\"04: Apr\",\n                        \"05\":\"05: May\",\n                        \"06\":\"06: Jun\",\n                        \"07\":\"07: Jul\",\n                        \"08\":\"08: Aug\",\n                        \"09\":\"09: Sep\",\n                        \"10\":\"10: Oct\",\n                        \"11\":\"11: Nov\",\n                        \"12\":\"12: Dec\"\n                    }, value:\"01\"});\n                    formElements.push({id: \"card-expiry-year\", type: \"select\", options: vv.stripe.getYears(), placeholder: new Date().getFullYear()});\n                    formElements.push({id: \"card-cvc\", type: \"text\", placeholder: \"CVV\"});\n                    formElements.push({id: \"stripe-submit\", type: \"submit\", text: \"Submit Payment\"});\n                    vv.userinput.getInput(formElements,'getstripetoken', null, \"\"); //TODO: total price for checkout\n                    if (!vv.stripe.eventAttached) {\n                        vv.events.add(vv,'userinput', function(e) {\n                            if (e.detail['lodge__userinput-type'] == 'getstripetoken') {\n                                Stripe.setPublishableKey(key);\n                                Stripe.card.createToken({\n                                    name: e.detail['name'],\n                                    number: e.detail['card-number'],\n                                    cvc: e.detail['card-cvc'],\n                                    exp_month: e.detail['card-expiry-month'],\n                                    exp_year: e.detail['card-expiry-year']\n                                }, function(status, response, evt) {\n                                    if (response.error) {\n                                        // Show the errors on the form\n                                        document.getElementById('lodge__userinput-message').innerHTML = response.error.message;\n                                        vv.styles.addClass(document.getElementsByClassName('lodge__userinput-container')[0],'nope');\n                                        setTimeout(function(){\n                                            vv.styles.removeClass(document.getElementsByClassName('lodge__userinput-container')[0],'nope');\n                                        }, 800);\n                                    } else {\n                                        // response contains id and card, which contains additional card details\n                                        vv.storage['checkoutdata']['stripe'] = response.id;\n                                        vv.storage['checkoutdata']['name']   = e.detail['name'];\n                                        vv.storage['checkoutdata']['email']  = e.detail['email'];\n                                        vv.events.fire(vv,'checkoutdata',vv.storage['checkoutdata'],source);\n                                        vv.overlay.reveal('<div class=\"lodge__loading\"></div>');\n                                    }\n                                });\n\n                            }\n                        });\n                        vv.stripe.eventAttached = true;\n                    }\n                });\n            }\n        }\n    };\n\n    /***************************************************************************************\n     *\n     * window.lodge.userinput (object)\n     * pass in an array of needed information, it builds forms, you get answers back\n     *\n     * EXAMPLES:\n     * event driven, so first pass in:\n     *\t\t[\n     *\t\t\t{id: \"name\", type: \"text\", placeholder: \"an input\", required: true},\n     *\t\t\t{id: \"name\", type: \"hidden\", value: \"secret\"},\n     *\t\t\t{id: \"submit\", type: \"submit\", text: \"submit\"}\n     *\t\t]\n     *\n     * then listen for an answer:\n     * \tvv.events.add(vv,'checkoutdata', function(e) {\n\t *\t \t\tconsole.log(e.detail);\n\t * \t});\n     *\n     * PUBLIC-ISH FUNCTIONS\n     * window.lodge.userinput.getinput(array elements, string type)\n     *\n     ***************************************************************************************/\n    vv.userinput = {\n        getInput: function (elements,type,style,msg) {\n            type = type || 'unknown';\n            var form = document.createElement('form');\n            var container = document.createElement('div');\n            container.className = 'lodge__userinput-container';\n            var message = document.createElement('div');\n            message.id = 'lodge__userinput-message';\n            message.innerHTML = '&nbsp;';\n\n            if (msg) {\n                message.innerHTML = msg;\n            }\n            form.className = 'lodge__userinput ' + type + ' ' + style;\n\n            elements.push({id:'lodge__userinput-type', type:'hidden', value:type});\n\n            for (var i = 0; i < elements.length; i++) {\n                var element = elements[i];\n                if (element.type !== \"submit\" && element.type !== \"select\") {\n                    var input = document.createElement(\"input\");\n                    input.type = element.type;\n                    input.placeholder = element.placeholder;\n                    if (element.value) {\n                        input.value = element.value;\n                    }\n                } else {\n                    if (element.type == \"select\") {\n                        var input = document.createElement(\"select\");\n                        var codes = Object.keys(element.options);\n                        codes.sort(function(a, b) {\n                            return a - b;\n                        });\n                        for (var n = 0; n < codes.length; n++) {\n                            var option = document.createElement(\"option\");\n                            option.value = codes[n];\n                            option.text = element.options[codes[n]];\n                            if (element.value == codes[n]) {\n                                option.selected = 'selected';\n                            }\n                            input.appendChild(option);\n                        }\n                    } else {\n                        var input = document.createElement(\"button\");\n                        input.type = \"submit\";\n                        input.innerHTML = element.text;\n                    }\n                }\n                input.name = element.id;\n                input.id = \"lodge__userinput-\" + type + \"-\" + element.id;\n                if (element.required) {\n                    input.setAttribute('data-required','1');\n                }\n\n                if (element.id == \"stripe-submit\" && vv.storage.checkoutdata.total) {\n                    // show the final amount to be charged\n\n                    var total = document.createElement('div');\n                    total.id = 'lodge__amount-message';\n\n                    if (!vv.storage.checkoutdata.transaction_message) {\n                        vv.storage.checkoutdata.transaction_message = \"\";\n                    }\n\n\n                    total.innerHTML = '<h2 class=\"lodge__pricing\">Transaction amount: <span>'+vv.storage.checkoutdata.total+vv.storage.checkoutdata.transaction_message+\"</span></h2><!--lodge__pricing-->\";\n\n                    form.appendChild(total);\n                }\n\n                form.appendChild(input);\n            }\n\n            container.appendChild(message);\n            container.appendChild(form);\n\n            vv.events.add(form,'submit', function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n                var formdata = {};\n                var incomplete = false;\n                for ( var i = 0; i < form.elements.length; i++ ) {\n                    var e = form.elements[i];\n                    formdata[e.name] = e.value;\n                    if (e.getAttribute('data-required') && e.value == '') {\n                        incomplete = true;\n                        vv.styles.addClass(e,'incomplete');\n                    } else {\n                        vv.styles.removeClass(e,'incomplete');\n                    }\n                }\n                if (incomplete) {\n                    // Show the errors on the form\n                    document.getElementById('lodge__userinput-message').innerHTML = 'Please complete all required fields.';\n                    vv.styles.addClass(document.getElementsByClassName('lodge__userinput-container')[0],'nope');\n                    setTimeout(function(){\n                        vv.styles.removeClass(document.getElementsByClassName('lodge__userinput-container')[0],'nope');\n                    }, 800);\n                } else {\n                    vv.events.fire(vv,'userinput',formdata);\n                }\n            });\n\n            vv.overlay.reveal(container);\n        }\n    };\n\n    /***************************************************************************************\n     *\n     * window.lodge.checkout (object)\n     * start the checkout flow for multiple payments in a controlled overlay\n     *\n     * PUBLIC FUNCTIONS\n     * window.lodge.checkout.begin(obj options, target source)\n     *\n     * EXAMPLE\n     vv.checkout.begin({\n\t\t \t\t\"stripe\"   : \"pk_test_wh4t3ver\", // false OR public stripe key\n\t\t \t\t\"paypal\"   : true, // boolean for \"should we have paypal as an option\"\n\t\t \t\t\"currency\" : \"USD\", // USD = default, but this also determines what country is\n\t\t\t\t\t\t\t\t auto-selected in the drop-down\n\t\t \t\t\"shipping\" : {\"r1\":\"US & Canada ($4)\",\"r2\":\"Rest of world ($7)\"}, // or bool.\n\t\t\t\t\t\t\t\t false = no shipping, true = shipping address but no region selector\n\t\t \t\t\"testing\"  : true // allows stripe to work without SSL if true, false or omit\n\t\t\t\t\t\t\t\t (preferable for production) to enforce\n\t \t\t});\n     *\n     ***************************************************************************************/\n    vv.checkout = {\n        prepped: false,\n\n        countries: {\n            \"AF\":\"Afghanistan\",\n            \"AX\":\"Åland Islands\",\n            \"AL\":\"Albania\",\n            \"DZ\":\"Algeria\",\n            \"AS\":\"American Samoa\",\n            \"AD\":\"Andorra\",\n            \"AO\":\"Angola\",\n            \"AI\":\"Anguilla\",\n            \"AQ\":\"Antarctica\",\n            \"AG\":\"Antigua and Barbuda\",\n            \"AR\":\"Argentina\",\n            \"AM\":\"Armenia\",\n            \"AW\":\"Aruba\",\n            \"AU\":\"Australia\",\n            \"AT\":\"Austria\",\n            \"AZ\":\"Azerbaijan\",\n            \"BS\":\"Bahamas\",\n            \"BH\":\"Bahrain\",\n            \"BD\":\"Bangladesh\",\n            \"BB\":\"Barbados\",\n            \"BY\":\"Belarus\",\n            \"BE\":\"Belgium\",\n            \"BZ\":\"Belize\",\n            \"BJ\":\"Benin\",\n            \"BM\":\"Bermuda\",\n            \"BT\":\"Bhutan\",\n            \"BO\":\"Bolivia\",\n            \"BQ\":\"Bonaire, Saint Eustatius and Saba\",\n            \"BA\":\"Bosnia-Herzegovina\",\n            \"BW\":\"Botswana\",\n            \"BV\":\"Bouvet Island\",\n            \"BR\":\"Brazil\",\n            \"IO\":\"British Indian Ocean Territory\",\n            \"BN\":\"Brunei Darussalam\",\n            \"BG\":\"Bulgaria\",\n            \"BF\":\"Burkina Faso\",\n            \"BI\":\"Burundi\",\n            \"KH\":\"Cambodia\",\n            \"vv\":\"Cameroon\",\n            \"CA\":\"Canada\",\n            \"CV\":\"Cape Verde\",\n            \"KY\":\"Cayman Islands\",\n            \"CF\":\"Central African Republic\",\n            \"TD\":\"Chad\",\n            \"CL\":\"Chile\",\n            \"CN\":\"China\",\n            \"CX\":\"Christmas Island\",\n            \"CC\":\"Cocos (Keeling) Islands\",\n            \"CO\":\"Colombia\",\n            \"KM\":\"Comoros\",\n            \"CG\":\"Congo\",\n            \"CD\":\"Congo, the Democratic Republic of the\",\n            \"CK\":\"Cook Islands\",\n            \"CR\":\"Costa Rica\",\n            \"CI\":\"Côte d’Ivoire\",\n            \"HR\":\"Croatia\",\n            \"CU\":\"Cuba\",\n            \"CW\":\"Curacao\",\n            \"CY\":\"Cyprus\",\n            \"CZ\":\"Czech Republic\",\n            \"DK\":\"Denmark\",\n            \"DJ\":\"Djibouti\",\n            \"DM\":\"Dominica\",\n            \"DO\":\"Dominican Republic\",\n            \"EC\":\"Ecuador\",\n            \"EG\":\"Egypt\",\n            \"SV\":\"El Salvador\",\n            \"GQ\":\"Equatorial Guinea\",\n            \"ER\":\"Eritrea\",\n            \"EE\":\"Estonia\",\n            \"ET\":\"Ethiopia\",\n            \"FK\":\"Falkland Islands\",\n            \"FO\":\"Faroe Islands\",\n            \"FJ\":\"Fiji\",\n            \"FI\":\"Finland\",\n            \"FR\":\"France\",\n            \"GF\":\"French Guiana\",\n            \"PF\":\"French Polynesia\",\n            \"TF\":\"French Southern Territories\",\n            \"GA\":\"Gabon\",\n            \"GM\":\"Gambia\",\n            \"GE\":\"Georgia\",\n            \"DE\":\"Germany\",\n            \"GH\":\"Ghana\",\n            \"GI\":\"Gibraltar\",\n            \"GR\":\"Greece\",\n            \"GL\":\"Greenland\",\n            \"GD\":\"Grenada\",\n            \"GP\":\"Guadeloupe\",\n            \"GU\":\"Guam\",\n            \"GT\":\"Guatemala\",\n            \"GG\":\"Guernsey\",\n            \"GN\":\"Guinea\",\n            \"GW\":\"Guinea-Bissau\",\n            \"GY\":\"Guyana\",\n            \"HT\":\"Haiti\",\n            \"HM\":\"Heard Island and McDonald Islands\",\n            \"VA\":\"Holy See (Vatican City State)\",\n            \"HN\":\"Honduras\",\n            \"HK\":\"Hong Kong\",\n            \"HU\":\"Hungary\",\n            \"IS\":\"Iceland\",\n            \"IN\":\"India\",\n            \"ID\":\"Indonesia\",\n            \"IR\":\"Iran, Islamic Republic of\",\n            \"IQ\":\"Iraq\",\n            \"IE\":\"Ireland\",\n            \"IM\":\"Isle of Man\",\n            \"IL\":\"Israel\",\n            \"IT\":\"Italy\",\n            \"JM\":\"Jamaica\",\n            \"JP\":\"Japan\",\n            \"JE\":\"Jersey\",\n            \"JO\":\"Jordan\",\n            \"KZ\":\"Kazakhstan\",\n            \"KE\":\"Kenya\",\n            \"KI\":\"Kiribati\",\n            \"KP\":\"North Korea\",\n            \"KR\":\"Korea\",\n            \"KW\":\"Kuwait\",\n            \"KG\":\"Kyrgyzstan\",\n            \"LA\":\"Lao People’s Democratic Republic\",\n            \"LV\":\"Latvia\",\n            \"LB\":\"Lebanon\",\n            \"LS\":\"Lesotho\",\n            \"LR\":\"Liberia\",\n            \"LY\":\"Libyan Arab Jamahiriya\",\n            \"LI\":\"Liechtenstein\",\n            \"LT\":\"Lithuania\",\n            \"LU\":\"Luxembourg\",\n            \"MO\":\"Macao\",\n            \"MK\":\"Macedonia, the former Yugoslav Republic of\",\n            \"MG\":\"Madagascar\",\n            \"MW\":\"Malawi\",\n            \"MY\":\"Malaysia\",\n            \"MV\":\"Maldives\",\n            \"ML\":\"Mali\",\n            \"MT\":\"Malta\",\n            \"MH\":\"Marshall Islands\",\n            \"MQ\":\"Martinique\",\n            \"MR\":\"Mauritania\",\n            \"MU\":\"Mauritius\",\n            \"YT\":\"Mayotte\",\n            \"MX\":\"Mexico\",\n            \"FM\":\"Micronesia, Federated States of\",\n            \"MD\":\"Moldova, Republic of\",\n            \"MC\":\"Monaco\",\n            \"MN\":\"Mongolia\",\n            \"ME\":\"Montenegro\",\n            \"MS\":\"Montserrat\",\n            \"MA\":\"Morocco\",\n            \"MZ\":\"Mozambique\",\n            \"MM\":\"Myanmar\",\n            \"NA\":\"Namibia\",\n            \"NR\":\"Nauru\",\n            \"NP\":\"Nepal\",\n            \"NL\":\"Netherlands\",\n            \"NC\":\"New Caledonia\",\n            \"NZ\":\"New Zealand\",\n            \"NI\":\"Nicaragua\",\n            \"NE\":\"Niger\",\n            \"NG\":\"Nigeria\",\n            \"NU\":\"Niue\",\n            \"NF\":\"Norfolk Island\",\n            \"MP\":\"Northern Mariana Islands\",\n            \"NO\":\"Norway\",\n            \"OM\":\"Oman\",\n            \"PK\":\"Pakistan\",\n            \"PW\":\"Palau\",\n            \"PS\":\"Palestinian Territory, Occupied\",\n            \"PA\":\"Panama\",\n            \"PG\":\"Papua New Guinea\",\n            \"PY\":\"Paraguay\",\n            \"PE\":\"Peru\",\n            \"PH\":\"Philippines\",\n            \"PN\":\"Pitcairn\",\n            \"PL\":\"Poland\",\n            \"PT\":\"Portugal\",\n            \"PR\":\"Puerto Rico\",\n            \"QA\":\"Qatar\",\n            \"RE\":\"Réunion\",\n            \"RO\":\"Romania\",\n            \"RU\":\"Russian Federation\",\n            \"RW\":\"Rwanda\",\n            \"BL\":\"Saint Barthélemy\",\n            \"SH\":\"Saint Helena, Ascension and Tristan da Cunha\",\n            \"KN\":\"Saint Kitts and Nevis\",\n            \"LC\":\"Saint Lucia\",\n            \"MF\":\"Saint Martin (French part)\",\n            \"PM\":\"Saint Pierre and Miquelon\",\n            \"VC\":\"Saint Vincent and the Grenadines\",\n            \"WS\":\"Samoa\",\n            \"SM\":\"San Marino\",\n            \"ST\":\"Sao Tome and Principe\",\n            \"SA\":\"Saudi Arabia\",\n            \"SN\":\"Senegal\",\n            \"RS\":\"Serbia\",\n            \"SC\":\"Seychelles\",\n            \"SL\":\"Sierra Leone\",\n            \"SG\":\"Singapore\",\n            \"SX\":\"Sint Maarten (Dutch part)\",\n            \"SK\":\"Slovakia\",\n            \"SI\":\"Slovenia\",\n            \"SB\":\"Solomon Islands\",\n            \"SO\":\"Somalia\",\n            \"ZA\":\"South Africa\",\n            \"GS\":\"South Georgia and the South Sandwich Islands\",\n            \"ES\":\"Spain\",\n            \"LK\":\"Sri Lanka\",\n            \"SD\":\"Sudan\",\n            \"SR\":\"Suriname\",\n            \"SJ\":\"Svalbard and Jan Mayen\",\n            \"SZ\":\"Swaziland\",\n            \"SE\":\"Sweden\",\n            \"CH\":\"Switzerland\",\n            \"SY\":\"Syrian Arab Republic\",\n            \"TW\":\"Taiwan, Province of China\",\n            \"TJ\":\"Tajikistan\",\n            \"TZ\":\"Tanzania, United Republic of\",\n            \"TH\":\"Thailand\",\n            \"TL\":\"Timor-Leste\",\n            \"TG\":\"Togo\",\n            \"TK\":\"Tokelau\",\n            \"TO\":\"Tonga\",\n            \"TT\":\"Trinidad and Tobago\",\n            \"TN\":\"Tunisia\",\n            \"TR\":\"Turkey\",\n            \"TM\":\"Turkmenistan\",\n            \"TC\":\"Turks and Caicos Islands\",\n            \"TV\":\"Tuvalu\",\n            \"UG\":\"Uganda\",\n            \"UA\":\"Ukraine\",\n            \"AE\":\"United Arab Emirates\",\n            \"GB\":\"United Kingdom\",\n            \"US\":\"United States\",\n            \"UY\":\"Uruguay\",\n            \"UZ\":\"Uzbekistan\",\n            \"VU\":\"Vanuatu\",\n            \"VE\":\"Venezuela, Bolivarian Republic of\",\n            \"VN\":\"Viet Nam\",\n            \"VG\":\"Virgin Islands, British\",\n            \"VI\":\"Virgin Islands, U.S.\",\n            \"WF\":\"Wallis and Futuna\",\n            \"EH\":\"Western Sahara\",\n            \"YE\":\"Yemen\",\n            \"ZM\":\"Zambia\",\n            \"ZW\":\"Zimbabwe\"\n        },\n\n        prep: function () {\n            if (!vv.checkout.prepped) {\n                // add in styles\n                vv.styles.injectCSS(vv.path + '/templates/checkout.css',false,true);\n                vv.checkout.prepped = true;\n            }\n        },\n\n        begin: function (options,source) {\n            if (vv.embedded) {\n                vv.events.fire(vv,'begincheckout',options);\n            } else {\n                vv.checkout.prep();\n                // set up the empty object we'll populate in the return\n                vv.storage['checkoutdata'] = {\n                    'stripe'   :false,\n                    'paypal'   :false,\n                    'shipping' :false,\n                    'currency' :false,\n                    'name'     :false,\n                    'email'    :false,\n                    'recurring':false,\n                    'origin'   :window.location.href,\n                    'total'\t   :false,\n                    'transaction_message':false\n                };\n                // detect SSL for stripe\n                if (location.protocol !== 'https:' && options.testing !== true) {\n                    options.stripe = false;\n                }\n\n                // recurring payments\n                if (options.recurring) {\n                    vv.storage['checkoutdata'].recurring = true;\n                }\n\n                if (options.transaction_message) {\n                    vv.storage['checkoutdata'].transaction_message = options.transaction_message;\n                }\n\n                if (options.total) {\n                    vv.storage['checkoutdata'].total = options.total;\n                }\n\n                // choose defaults by currency\n                if (options.shipping) {\n                    // this push business feels really dumb but we need a proper length count\n                    // and using a single array literal wasn't expanding properly via push\n                    var shippingElements = [];\n                    shippingElements.push(\n                        {id: \"name\", type: \"text\", placeholder: \"Ship to name\", required: true},\n                        {id: \"address1\", type: \"text\", placeholder: \"Shipping address 1\", required: true},\n                        {id: \"address2\", type: \"text\", placeholder: \"Shipping address 2\"},\n                        {id: \"city\", type: \"text\", placeholder: \"City\", required: true},\n                        {id: \"state\", type: \"text\", placeholder: \"State/Province/Region\", required: true},\n                        {id: \"postalcode\", type: \"text\", placeholder: \"Postal code\", required: true}\n                    );\n                    if (options.stripe || options.paypal) {\n                        var selectedCountry = \"US\";\n                        if (options.currency) {\n                            switch (options.currency) {\n                                case \"GBP\":\n                                    selectedCountry = \"GB\";\n                                    break;\n                                case \"AUD\":\n                                    selectedCountry = \"AU\";\n                                    break;\n                                case \"JPY\":\n                                    selectedCountry = \"JP\";\n                                    break;\n                                case \"CAD\":\n                                    selectedCountry = \"CA\";\n                                    break;\n                                case \"NZD\":\n                                    selectedCountry = \"NZ\";\n                                    break;\n                                case \"HKD\":\n                                    selectedCountry = \"HK\";\n                                    break;\n                                case \"MXN\":\n                                    selectedCountry = \"MX\";\n                                    break;\n                                case \"NOK\":\n                                    selectedCountry = \"NO\";\n                                    break;\n                            }\n                        }\n                        // add in the country selector\n                        shippingElements.push({id: \"country\", type: \"select\", options: vv.checkout.countries, value: selectedCountry});\n                        // and if needed, the shipping region selector\n                        if (!options.recurring) {\n                            if (typeof options.shipping === 'object') {\n                                shippingElements.push({id: \"shipping-region\", type: \"select\", options: {\n                                    \"\":\"Select shipping region\",\n                                    \"r1\":options.shipping.r1,\n                                    \"r2\":options.shipping.r2\n                                }, required: true});\n                            }\n                        }\n\n                        // hey look a button!\n                        shippingElements.push({id: \"shipping-submit\", type: \"submit\", text: \"Set shipping info\"});\n                        // get the answers\n                        if (typeof options.shipping === 'object') {\n                            vv.userinput.getInput(shippingElements,'getshippingaddress','shipping');\n                        } else {\n                            vv.userinput.getInput(shippingElements,'getshippingaddress','noshipping');\n                        }\n                        // wait for them\n                        vv.events.add(vv,'userinput', function(e) {\n                            if (e.detail['lodge__userinput-type'] == 'getshippingaddress') {\n                                vv.storage['checkoutdata']['shipping'] = e.detail;\n                                vv.checkout.initiatepayment(options,source);\n                            }\n                        });\n                    } else {\n                        vv.checkout.showerror();\n                    }\n                } else {\n                    vv.checkout.initiatepayment(options,source);\n                }\n            }\n        },\n\n        initiatepayment: function (options,source) {\n            // just starts the payment flow and does the steps needed based on\n            // the options passed in...\n            // Stripe only\n            if (options.stripe && !options.paypal) {\n                vv.stripe.generateToken(options.stripe,source);\n            }\n            // Paypal only\n            else if (!options.stripe && options.paypal) {\n                vv.storage['checkoutdata']['paypal'] = true;\n                vv.events.fire(vv,'checkoutdata',vv.storage['checkoutdata'],source);\n                vv.overlay.reveal('<div class=\"lodge__loading\"></div>');\n            }\n            // Stripe and Paypal\n            else if (options.stripe && options.paypal) {\n                // Create HTML elements to use as selectors\n                var container = document.createElement(\"div\");\n                container.className = \"lodge__checkout-choose\";\n\n                var ppspan = document.createElement(\"span\");\n                var stspan = document.createElement(\"span\");\n\n                ppspan.innerHTML = 'Pay with PayPal';\n                ppspan.className = 'pay-pp';\n                stspan.innerHTML = 'Pay with a credit card';\n                stspan.className = 'pay-cc';\n\n                // Create a special event to detect Paypal chosen\n                vv.events.add(ppspan,'click', function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    vv.storage['checkoutdata']['paypal'] = true;\n                    vv.events.fire(vv,'checkoutdata',vv.storage['checkoutdata'],source);\n                    vv.overlay.reveal('<div class=\"lodge__loading\"></div>');\n                });\n\n                // Create a special event to detect Stripe chosen\n                vv.events.add(stspan,'click', function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    vv.stripe.generateToken(options.stripe,source);\n                });\n\n                container.appendChild(ppspan);\n                container.appendChild(stspan);\n\n                vv.overlay.reveal(container);\n\n            }\n            // No available payment types, by options or SSL limits on Stripe\n            else {\n                vv.checkout.showerror();\n            }\n        },\n\n        showerror: function (type) {\n            vv.overlay.reveal('<div class=\"lodge__checkout-error\">There are no valid payment types. Please add a payment connection. Check to make sure your site supports SSL (https) if you are using Stripe.</div>');\n        }\n    }\n\n}()); // END\n"],"file":"checkout-stripe.js"}