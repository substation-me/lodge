{"version":3,"sources":["../../source/modules/checkout.js"],"names":["vv","window","lodge","braintree","eventAttached","generateToken","options","embedded","getTemplate","templateName","loadCSS","successCallback","t","container","document","createElement","innerHTML","className","overlay","reveal","innerContent","form","querySelector","submit","inputs","querySelectorAll","len","length","i","addEventListener","e","styles","addClass","el","target","parentNode","removeClass","disabled","client","create","authorization","err","clientInstance","console","error","d","Date","hostedFields","input","fields","number","selector","placeholder","cvv","expirationDate","getMonth","getFullYear","hostedFieldsInstance","on","event","formValid","Object","keys","every","key","isValid","cards","type","code","size","setAttribute","field","attribute","value","preventDefault","tokenize","payload","debug","out","poststring","amount","nonce","showLoading","ajax","send","url","endpoint","postString","callback","errorMsg","successMsg","checkout","prepped","prep","getScript","injectCSS","css","path","top","begin","source","events","fire","obj","data","finalOptions","assign","paypal","currency","firstName","lastName","email","recurring","initiatepayment","ppspan","stspan","stopPropagation","appendChild","showerror"],"mappings":"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","sourcesContent":["/* eslint-disable no-undef */\n/* eslint-disable no-plusplus */\n\n(function checkout() {\n  const vv = window.lodge;\n\n  /** *************************************************************************************\n   *\n   * window.lodge.braintree (object)\n   * Handle Braintree payment token generation\n   *\n   * PUBLIC-ISH FUNCTIONS\n   * window.lodge.stripe.generateToken(string key, target source)\n   *\n   ************************************************************************************** */\n  vv.braintree = {\n    eventAttached: false,\n\n    generateToken(options) {\n      if (vv.embedded) {\n        // vv.events.fire(vv,'stripetokenrequested',params);\n      } else {\n        // load the markup template, make any needed edits, and return\n        vv.getTemplate({\n          templateName: \"checkout\",\n          loadCSS: false,\n          successCallback: function successCallback(t) {\n            const container = document.createElement(\"div\");\n            container.innerHTML = t;\n            container.className = \"lodge__checkout-wrapper\";\n\n            // show the container while braintree API injects hosted fields\n            vv.overlay.reveal({ innerContent: container });\n\n            // grab the bits we care about\n            const form = document.querySelector(\".lodge__form--braintree\");\n            const submit = document.querySelector(\".lodge__button--braintree\");\n\n            // do highlights for focused name/email\n            const inputs = document.querySelectorAll(\n              \".lodge__form--braintree input\"\n            );\n            const len = inputs.length;\n            for (let i = 0; i < len; i++) {\n              inputs[i].addEventListener(\"focus\", function inputsFocus(e) {\n                vv.styles.addClass({\n                  el: e.target.parentNode,\n                  className: \"braintree-hosted-fields-focused\",\n                });\n              });\n\n              inputs[i].addEventListener(\"blur\", function inputsBlur(e) {\n                vv.styles.removeClass({\n                  el: e.target.parentNode,\n                  className: \"braintree-hosted-fields-focused\",\n                });\n              });\n            }\n\n            submit.disabled = true;\n\n            braintree.client.create(\n              {\n                authorization: options.braintree,\n              },\n              function (err, clientInstance) {\n                if (err) {\n                  console.error(err);\n                  return;\n                }\n\n                // Create input fields and add text styles\n                const d = new Date(); // need this in the call below to customize exp date\n\n                braintree.hostedFields.create(\n                  {\n                    client: clientInstance,\n                    styles: {\n                      input: {\n                        \"font-family\":\"monospace\",\n                        \"height\":\"42px\",\n                        \"color\":\"rgb(40, 44, 55)\",\n                        \"font-size\":\"16px\",\n                        \"line-height\":\"3\",\n                        \"transition\":\"color 0.1s ease 0s\",\n                        \"border\": \"0\",\n                        \"padding\": \"8px\",\n                        \"background-color\":\"transparent\",\n                      },\n                      // Style the text of an invalid input\n                      \"input.invalid\": {\n                        \"color\":\"#E53A40\",\n                      },\n                      // placeholder styles need to be individually adjusted\n                      \"::-webkit-input-placeholder\": {\n                        \"color\":\"rgba(0,0,0,0.4)\",\n                      },\n                      \":-moz-placeholder\": {\n                        \"color\":\"rgba(0,0,0,0.4)\",\n                      },\n                      \"::-moz-placeholder\": {\n                        \"color\":\"rgba(0,0,0,0.4)\",\n                      },\n                      \":-ms-input-placeholder\": {\n                        \"color\":\"rgba(0,0,0,0.4)\",\n                      },\n                    },\n                    // Add information for individual fields\n                    fields: {\n                      number: {\n                        selector: \".lodge__braintree-card-number\",\n                        placeholder: \"0000 0000 0000 0000\",\n                      },\n                      cvv: {\n                        selector: \".lodge__braintree-cvv\",\n                        placeholder: \"123\",\n                      },\n                      expirationDate: {\n                        selector: \".lodge__braintree-expiration-date\",\n                        placeholder: `${d.getMonth() + 1} / ${d.getFullYear() + 1}`,\n                      },\n                    },\n                  },\n                  function (err, hostedFieldsInstance) {\n                    if (err) {\n                      console.error(err);\n                      return;\n                    }\n\n                    hostedFieldsInstance.on(\"validityChange\", function (event) {\n                      // Check if all fields are valid, then show submit button\n                      const formValid = Object.keys(event.fields).every(\n                        function (key) {\n                          return event.fields[key].isValid;\n                        }\n                      );\n\n                      if (formValid) {\n                        submit.disabled = false;\n                      } else {\n                        submit.disabled = true;\n                      }\n                    });\n\n                    hostedFieldsInstance.on(\"cardTypeChange\", function (event) {\n                      // Change card bg depending on card type\n                      if (event.cards.length === 1) {\n                        vv.styles.addClass({\n                          el: form,\n                          className: event.cards[0].type,\n                        });\n                        document.querySelector(\"#card-image\").className = \"\";\n                        vv.styles.addClass({\n                          el: document.querySelector(\"#card-image\"),\n                          className: event.cards[0].type,\n                        });\n\n                        // Change the CVV length for AmericanExpress cards\n                        if (event.cards[0].code.size === 4) {\n                          hostedFieldsInstance.setAttribute({\n                            field: \"cvv\",\n                            attribute: \"placeholder\",\n                            value: \"1234\",\n                          });\n                        }\n                      } else {\n                        hostedFieldsInstance.setAttribute({\n                          field: \"cvv\",\n                          attribute: \"placeholder\",\n                          value: \"123\",\n                        });\n                      }\n                    });\n\n                    submit.addEventListener(\n                      \"click\",\n                      function submitHandler(event) {\n                        event.preventDefault();\n\n                        hostedFieldsInstance.tokenize(function tokenize(\n                          error,\n                          payload\n                        ) {\n                          if (error) {\n                            vv.debug.out(error);\n                          } else {\n                            const poststring = `email=${\n                              document.querySelector(\".lodge__braintree-email\").value\n                            }&firstName=${\n                              document.querySelector(\".lodge__braintree-first-name\").value\n                            }&lastName=${\n                              document.querySelector(\".lodge__braintree-last-name\").value\n                            }&amount=${options.amount}&nonce=${payload.nonce}`;\n                            vv.overlay.showLoading();\n                            vv.ajax.send({\n                              url: options.endpoint,\n                              postString: poststring,\n                              callback: function reveal(e, r) {\n                                if (e) {\n                                  vv.overlay.reveal({\n                                    innerContent: `<h2 class=\"lodge__checkout-error\">${options.errorMsg}</h2>`,\n                                  });\n                                } else {\n                                  vv.overlay.reveal({\n                                    innerContent: `<h2 class=\"lodge__checkout-success\">${options.successMsg}</h2>`,\n                                  });\n                                }\n                              },\n                            });\n                          }\n                        });\n                      },\n                      false\n                    );\n                  }\n                );\n              }\n            );\n          },\n        });\n      }\n    },\n  };\n\n  /** *************************************************************************************\n     *\n     * window.lodge.checkout (object)\n     * start the checkout flow for multiple payments in a controlled overlay\n     *\n     * PUBLIC FUNCTIONS\n     * window.lodge.checkout.begin(obj options, target source)\n     *\n     * EXAMPLE\n     vv.checkout.begin({\n\t\t \t\t\"braintree\"  : \"pk_test_wh4t3ver\", // false OR public stripe key\n\t\t \t\t\"paypal\"     : true, // boolean for \"should we have paypal as an option\"\n\t\t \t\t\"endpoint\"   : for AJAX calls on submit\n\t \t\t});\n     *\n     ************************************************************************************** */\n  vv.checkout = {\n    prepped: false,\n\n    prep() {\n      if (!vv.checkout.prepped) {\n        // add in styles\n        vv.getScript({\n          url: \"https://js.braintreegateway.com/web/3.46.0/js/client.min.js\",\n          callback: function callback() {\n            vv.getScript({\n              url:\n                \"https://js.braintreegateway.com/web/3.46.0/js/hosted-fields.min.js\",\n              callback: function secondCallback() {\n                vv.styles.injectCSS({\n                  css: `${vv.path}/templates/checkout.css`,\n                  top: true,\n                });\n                vv.checkout.prepped = true;\n              },\n            });\n          },\n        });\n      }\n    },\n\n    begin(options, source) {\n      if (vv.embedded) {\n        vv.events.fire({ obj: vv, type: \"begincheckout\", data: options });\n      } else {\n        vv.checkout.prep();\n        // set up the empty object we'll populate in the return\n        const defaultOptions = {\n          braintree: false,\n          paypal: false,\n          currency: false,\n          firstName: false,\n          lastName: false,\n          email: false,\n          recurring: false,\n          amount: false,\n          endpoint: \"\",\n          successMsg: \"Success.\",\n          errorMsg: \"There was a problem.\",\n        };\n\n        const finalOptions = Object.assign(defaultOptions, options);\n        vv.checkout.initiatepayment(finalOptions, source);\n      }\n    },\n\n    initiatepayment(options, source) {\n      // just starts the payment flow and does the steps needed based on\n      // the options passed in...\n      // BT only\n      if (options.braintree && !options.paypal) {\n        vv.braintree.generateToken(options, source);\n      }\n      // Paypal only\n      else if (!options.braintree && options.paypal) {\n        vv.events.fire({\n          obj: vv,\n          type: \"checkoutdata\",\n          data: options,\n          target: source,\n        });\n        vv.overlay.reveal({\n          innerContent: '<div class=\"lodge__loading\"></div>',\n        });\n      }\n      // Stripe and Paypal\n      else if (options.braintree && options.paypal) {\n        // Create HTML elements to use as selectors\n        const container = document.createElement(\"div\");\n        container.className = \"lodge__checkout-choose\";\n\n        const ppspan = document.createElement(\"span\");\n        const stspan = document.createElement(\"span\");\n\n        ppspan.innerHTML = \"Pay with PayPal\";\n        ppspan.className = \"pay-pp\";\n        stspan.innerHTML = \"Pay with a credit card\";\n        stspan.className = \"pay-cc\";\n\n        // Create a special event to detect Paypal chosen\n        ppspan.addEventListener(\"click\", function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n          vv.events.fire({\n            obj: vv,\n            type: \"checkoutdata\",\n            data: options,\n            target: source,\n          });\n          vv.overlay.showLoading();\n        });\n\n        // Create a special event to detect Braintree chosen\n        stspan.addEventListener(\"click\", function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n          vv.braintree.generateToken(options.braintree, source);\n        });\n\n        container.appendChild(ppspan);\n        container.appendChild(stspan);\n\n        vv.overlay.reveal({ innerContent: container });\n      }\n      // No available payment types, by options or SSL limits on Stripe\n      else {\n        vv.checkout.showerror();\n      }\n    },\n\n    showerror() {\n      vv.overlay.reveal({\n        innerContent:\n          '<div class=\"lodge__checkout-error\">There are no valid payment types. Please add a payment connection. Check to make sure your site supports SSL (https) if you are using Braintree.</div>',\n      });\n    },\n  };\n})(); // END\n"],"file":"checkout.js"}