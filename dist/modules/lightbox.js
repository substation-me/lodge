(function(){const a=window.lodge;a.lightbox={injectIframe(b){const c=a.lightbox,d=c.parseVideoURL(b);a.overlay.reveal({innerContent:`<iframe src="${d}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`,wrapClass:"lodge__media"})},parseVideoURL(a){let b=!1;return-1===a.toLowerCase().indexOf("youtube.com/watch?v=")?-1!==a.toLowerCase().indexOf("vimeo.com/")&&(b=a.replace("www.",""),b=b.replace("vimeo.com/","player.vimeo.com/video/"),b+="?title=1&byline=1&portrait=1&autoplay=1"):(b=a.replace("watch?v=","embed/"),b=b.replace("http:","https:"),-1<b.indexOf("&")&&(b=b.substr(0,b.indexOf("&"))),b+="?autoplay=1&autohide=1&rel=0"),b},showGallery(b,c,d){let e=`<div class="lodge__gallery-img" style="background-image:url(${b});"></div>`;if(c&&(e+=`<div class="lodge__gallery-caption">${c}</div>`),a.overlay.reveal({innerContent:e,wrapClass:"lodge__gallery"}),d){const c=document.createElement("div");c.className="lodge__gallery-prev";const e=document.createElement("div");e.className="lodge__gallery-next",c.addEventListener("click",function(){const c=a.lightbox.objLoop(d,b,"prev"),e=c.i,f=c.c;a.lightbox.showGallery(e,f,d)}),e.addEventListener("click",function(){const c=a.lightbox.objLoop(d,b,"next"),e=c.i,f=c.c;a.lightbox.showGallery(e,f,d)});const f=document.querySelector(".lodge__gallery");f.appendChild(c),f.appendChild(e)}},objLoop(a,b,c){const d=Object.keys(a);let e=d[d.length-1],f=a[d[0]],h=1;if("prev"===c&&(e=d[0],f=a[d[d.length-1]],h=-1),e===b)return f;for(let e=0;e<d.length;e++)if(d[e]===b)return a[d[e+h]]}};const b=document.querySelectorAll("a[href*=\"youtube.com/watch?v=\"],a[href*=\"vimeo.com\"]");0<b.length&&a.overlay.create(function(){for(let c=0;c<b.length;++c)b[c].addEventListener("click",function(b){b.preventDefault();const c=b.currentTarget.href;a.lightbox.injectIframe(c)})});const c=document.querySelectorAll("a.lodge.gallery,div.lodge.gallery");0<c.length&&a.overlay.create(function(){for(var b=0;b<c.length;++b)if("a"==c[b].tagName.toLowerCase())c[b].addEventListener("click",function(b){b.preventDefault();let c=!1;const d=this.href;this.hasAttribute("title")&&(c=this.title),a.lightbox.showGallery(d,c)});else{const e=c[b].getElementsByTagName("img");for(var d={},b=0;b<e.length;b++){const a=e[b].src;let c=!1;e[b].hasAttribute("title")&&(c=e[b].title),!c&&e[b].hasAttribute("alt")&&(c=e[b].alt),d[e[b].src]={i:a,c:c}}for(let b=0;b<e.length;b++)e[b].addEventListener("click",function(b){b.preventDefault(),a.lightbox.showGallery(d[this.src].i,d[this.src].c,d)})}})})();
//# sourceMappingURL=lightbox.js.map