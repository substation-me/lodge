"use strict";(function(){var a=window.lodge;a.lightbox={injectIframe:function injectIframe(b){var c=a.lightbox,d=c.parseVideoURL(b);a.overlay.reveal({innerContent:"<div class=\"vv-aspect\"><iframe src=\"".concat(d,"\" style=\"position:absolute;top:0;left:0;width:100%;height:100%;\" frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></div>"),wrapClass:"vv-media"})},parseVideoURL:function parseVideoURL(a){var b=!1;return-1===a.toLowerCase().indexOf("youtube.com/watch?v=")?-1!==a.toLowerCase().indexOf("vimeo.com/")&&(b=a.replace("www.",""),b=b.replace("vimeo.com/","player.vimeo.com/video/"),b+="?title=1&byline=1&portrait=1&autoplay=1"):(b=a.replace("watch?v=","embed/"),b=b.replace("http:","https:"),-1<b.indexOf("&")&&(b=b.substr(0,b.indexOf("&"))),b+="?autoplay=1&autohide=1&rel=0"),b},showGallery:function showGallery(b,c,d){var e="<div class=\"vv-gallery-img\" style=\"background-image:url(".concat(b,");\"></div>");if(c&&(e+="<div class=\"vv-gallery-caption\">".concat(c,"</div>")),a.overlay.reveal({innerContent:e,wrapClass:"vv-gallery"}),d){var f=document.createElement("div");f.className="vv-gallery-prev";var h=document.createElement("div");h.className="vv-gallery-next",f.addEventListener("click",function(){var c=a.lightbox.objLoop(d,b,"prev"),e=c.i,f=c.c;a.lightbox.showGallery(e,f,d)}),h.addEventListener("click",function(){var c=a.lightbox.objLoop(d,b,"next"),e=c.i,f=c.c;a.lightbox.showGallery(e,f,d)});var i=document.querySelector(".vv-gallery");i.appendChild(f),i.appendChild(h)}},objLoop:function objLoop(a,b,c){var d=Object.keys(a),e=d[d.length-1],f=a[d[0]],h=1;if("prev"===c&&(e=d[0],f=a[d[d.length-1]],h=-1),e===b)return f;for(var j=0;j<d.length;j++)if(d[j]===b)return a[d[j+h]]}};var b=document.querySelectorAll("a[href*=\"youtube.com/watch?v=\"],a[href*=\"vimeo.com\"]");0<b.length&&a.overlay.create(function(){for(var c=0;c<b.length;++c)b[c].addEventListener("click",function(b){if(400<a.measure.viewport().x&&!b.metaKey){b.preventDefault();var c=b.currentTarget.href;a.lightbox.injectIframe(c)}})});var c=document.querySelectorAll("a.lodge.gallery,div.lodge.gallery");0<c.length&&a.overlay.create(function(){for(var b=0;b<c.length;++b)if("a"==c[b].tagName.toLowerCase())c[b].addEventListener("click",function(b){b.preventDefault();var c=!1,d=this.href;this.hasAttribute("title")&&(c=this.title),a.lightbox.showGallery(d,c)});else{for(var d=c[b].getElementsByTagName("img"),f={},b=0;b<d.length;b++){var g=d[b].src,h=!1;d[b].hasAttribute("title")&&(h=d[b].title),!h&&d[b].hasAttribute("alt")&&(h=d[b].alt),f[d[b].src]={i:g,c:h}}for(var j=0;j<d.length;j++)d[j].addEventListener("click",function(b){b.preventDefault(),a.lightbox.showGallery(f[this.src].i,f[this.src].c,f)})}})})();