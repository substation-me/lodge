<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>lodge</title>
  
  <link rel="stylesheet" href="/assets/css/normalize.css">
  <link rel="stylesheet" href="/assets/css/embed.css">

  <link rel="preload" href="/assets/images/demo-snacks.gif" as="image">

  <script src="/dist/lodge.js" data-options="lightboxvideo=true"></script>

</head>

<body>
  <div class="screen">
    <div class="screen__bg"></div>
    <div class="screen__slashes"></div>
    <div class="screen__mask"></div>
  </div>

  <div class="demo-panels">
    <div class="demo-panel demo-panel-0">
      <h2>So this bit's an iframe.</h2>
      Thanks to shared events, the main window can resize the embed as needed. <a href="#" class="demo-doresize">Check it out.</a>
    </div>
    <div class="demo-panel demo-panel-1">
      <h2>Pass notes in an overlay.</h2>
      In the main window or the embed, just <a href="#" class="demo-domessage">say hello</a> or ask a question.
    </div>
    <div class="demo-panel demo-panel-2">
      <h2>Videos looks great big.</h2>
      <div class="demo-videolisting">
        <a href="https://vimeo.com/187604216">
          <img src="https://i.vimeocdn.com/video/598143533_640x360.webp" class="demo-video" alt="Kool Keith X MF DOOM: Super Heroes">
          <b>Kool Keith X MF DOOM</b> <br>Super Heroes
        </a>
      </div>
    </div>
    <div class="demo-panel demo-panel-3">
      <h2>Get interactive.</h2>
      Open bigger interactive components <embed class="lodge overlay" src="embed.html" id="demo2" title="in an overlay"> and give them some space.
    </div>
  </div>
  
  <div class="demo-snacks">
    <img src ="/assets/images/demo-snacks.gif" width="100%" height="auto" alt="I love snacks.">
  </div>
  
  <div class="demo-overlay">
    <h2>Oh hello again.</h2>
    <p>
      This is actually the same demo embed, but when opened in an embed lodge adds
      a <code>.lodge__embed--overlay</code> class we can use to show, hide, and 
      switch things around. Comes in handy when you want something to work as both
      a standalone page and as embedded content.
    </p>
    <button class="demo-overlay__button">Close</button>
  </div>



  
  <script>
    var vv = window.lodge;
    var demos = document.querySelector('div.demo-panels');
    
    vv.addEventListener('ready', function(e) {
      
      // opens an overlay in the main window based on a click in an embed
      var domessage = document.querySelector('a.demo-domessage');
      domessage.addEventListener('click', function(e){
        e.preventDefault();
        e.stopPropagation();
        vv.prompt.message({
          message: 'Hi there.',
          context: 'Just a single line of JavaScript opens full-page messaging and modal overlays.'
        });
      }, false);

      // change the min-height on the body to resize things
      var doresize = document.querySelector('a.demo-doresize');
      var snacks = document.querySelector('div.demo-snacks');
      doresize.addEventListener('click', function(e){
        e.preventDefault();
        e.stopPropagation();
        snacks.style.display = 'block';
        setTimeout(() => { 
          snacks.style.display = 'none';
        }, 2000);
      }, false);

      var closebutton = document.querySelector('.demo-overlay__button');
      closebutton.addEventListener('click', function(e){
        e.preventDefault();
        e.stopPropagation();
        vv.overlay.hide();
      }, false);
      
    });
    
    vv.addEventListener('openscreen', function(e) {
      var screen = document.querySelector('div.screen');
      screen.style.left = '-220vw';
      demos.style.opacity = 1;
    });

    vv.addEventListener('changedemo', function(e) {
      var margin = 0 - (e.detail * 100);
      demos.style.marginLeft = `${margin}vw`;
    });
  </script>
</body>
</html>